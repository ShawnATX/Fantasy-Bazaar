(this["webpackJsonpfantasy-bazaar"]=this["webpackJsonpfantasy-bazaar"]||[]).push([[0],{49:function(e,a,t){},50:function(e,a,t){},73:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(19),l=t.n(c),s=t(13),o=t(39),i=(t(49),t(5)),m=t(3),u=(t(50),t(8)),d=t(21),p=r.a.createContext({isAuthenticated:!1,user:{},userHasAuthenticated:function(){}}),h=t(76),f=t(77),b=t(78),E=function(e){return r.a.createElement(h.a,{fluid:!0,className:"text-center"},r.a.createElement(f.a,{className:"mt-5 px-5"},r.a.createElement(b.a,null,r.a.createElement(u.b,{to:"/newusertype",alt:"Get Started",className:"text-center"},r.a.createElement("button",{className:"splashBtn"},"Get Started")))),r.a.createElement(f.a,{className:"mt-5 px-5"},r.a.createElement(b.a,null,r.a.createElement(u.b,{to:"/login"},r.a.createElement("button",null,"Login Here")))))},g=t(79),v=function(){return r.a.createElement(h.a,null,r.a.createElement("div",null,"Sorry, page not found! :("),r.a.createElement(u.b,{to:"/"},r.a.createElement(g.a,null,"Head back Home")))},N=t(4),y=t.n(N),w={getItems:function(){return y.a.get("/api/items")},getItem:function(e){return y.a.get("/api/items/"+e)},getItemsBySystem:function(e){return y.a.get("/api/items/"+e)},getItemsById:function(e){return console.log(e),y.a.post("/api/items/many",{items:e})},deleteItem:function(e){return y.a.delete("/api/items/"+e)},saveItem:function(e){return y.a.post("/api/items",e)},getUser:function(e){return y.a.get("/api/users/"+e)},checkEmail:function(e){return y.a.post("/api/users/email/",e)},getUsers:function(){return y.a.get("/api/users")},saveUser:function(e){return y.a.post("/api/users",e)},deleteUser:function(e){return y.a.delete("/api/users/"+e)},updateUser:function(e,a){return y.a.put("/api/users/"+e,a)},loginUser:function(e){return y.a.post("/api/users/login",e)},logoutUser:function(){return y.a.get("/logout")},saveCharacter:function(e){return y.a.post("/api/characters",e)},getCharacter:function(e){return y.a.get("/api/characters/"+e)},getCharacters:function(e){return y.a.post("/api/characters/many"+e)},updateCharacter:function(e,a){return y.a.put("/api/characters"+e,a)},characterPurchase:function(e){return y.a.put("/api/characters/purchase",e)},characterSale:function(e){return y.a.put("/api/characters/sell",e)},characterAddItems:function(e){return y.a.put("/api/characters/items",e)},getBazaar:function(e){return y.a.get("/api/bazaars/code/"+e)},getBazaarId:function(e){return y.a.get("/api/bazaars/"+e)},deleteBazaar:function(e){return y.a.delete("/api/bazaars/"+e)},saveBazaar:function(e){return y.a.post("/api/bazaars",e)}},j=function(e){var a=Object(n.useContext)(p).authenticationState;return r.a.createElement(f.a,{className:"border align-middle"},r.a.createElement(b.a,{className:"align-middle"},r.a.createElement("h4",null,e.item.name)," ",e.quantity?"X".concat(e.quantity):""),r.a.createElement(b.a,null,r.a.createElement("h5",null,e.item.value)," Gold"),r.a.createElement(b.a,null,r.a.createElement("h5",null,e.item.weight)," lbs."),r.a.createElement(b.a,null,function(){switch(e.item.type){case"Weapon":return e.item.description.properties?"Damage: ".concat(e.item.description.damage,"\n                    Properties: ").concat(e.item.description.properties):"Damage: ".concat(e.item.description.damage);case"Armor":return e.item.description.skillModifier&&e.item.description.abilityReq?"Armor Class: ".concat(e.item.description.ac,"\n                            \n                    Skill Modifier: ").concat(e.item.description.skillModifier,"\n                            \n                    Ability Requirements: ").concat(e.item.description.abilityReq):e.item.description.skillModifier?"Armor Class: ".concat(e.item.description.ac,"\n                            Skill Modifier: ").concat(e.item.description.skillModifier):e.item.description.skillModifier?"Armor Class: ".concat(e.item.description.ac,"\n                            Ability Requirements: ").concat(e.item.description.abilityReq):"Armor Class: ".concat(e.item.description.ac);case"Consumable":return"".concat(e.item.description.description)}}()),r.a.createElement(b.a,null,r.a.createElement("button",{className:"btn-small my-1 float-right",onClick:function(){return e.action(e.item)},disabled:e.item.value>a.user.wallet&&"Purchase"===e.button},e.button)))},O=function(e){var a=Object(n.useState)([]),t=Object(m.a)(a,2),c=t[0],l=t[1],s=Object(n.useContext)(p).authenticationState;Object(n.useEffect)((function(){w.getItemsById(e.items).then((function(e){l(e.data)}))}),[s,e.items]);var o=function(a){for(var t=0,n=0;n<e.items.length;++n)e.items[n]===a&&t++;return t};return r.a.createElement("div",null,r.a.createElement(f.a,{className:"mt-4 px-5"},r.a.createElement(b.a,{className:"mb-1 text-center"},r.a.createElement("button",{href:"#home",alt:"Back Home",className:"text-center btn-small",onClick:function(){return e.setPageState("Home")}},"Back Home"))),e.items.length>0?c.map((function(a){return r.a.createElement(j,{key:a._id,item:a,quantity:o(a._id),action:e.sell,button:"Sell"})})):"No items in inventory at this time. Maybe give the Bazaar a visit?")},S=function(e){var a=e.type,t=e.items,n=a.replace(/\s+/g,""),c=[];return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header p-1",id:n+"head"},r.a.createElement("h1",{className:"mb-0 text-center"},r.a.createElement("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#"+n+"body","aria-expanded":"true","aria-controls":n+"body"},a))),r.a.createElement("div",{id:n+"body",className:"accordion-collapse "+e.expanded,"aria-labelledby":n+"head","data-parent":"#itemMenu"},void(c=(c=Array.from(new Set(t.map((function(e){return e.subtype}))))).map((function(e){return{subtype:e,strippedSubtype:e.replace(/\s+/g,"")}}))),c.map((function(a){return r.a.createElement("div",{className:"card",key:a.strippedSubtype},r.a.createElement("div",{className:"card-header p-1",id:a.strippedSubtype+"head"},r.a.createElement("h3",{className:"mb-0 text-center"},r.a.createElement("button",{className:"accordion-button subtype-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#"+a.strippedSubtype+"body","aria-expanded":"true","aria-controls":a.strippedSubtype+"body"},a.subtype))),r.a.createElement("div",{id:a.strippedSubtype+"body",className:"accordion-collapse "+e.expanded,"aria-labelledby":a.strippedSubtype+"head","data-parent":"#itemMenu"},r.a.createElement("div",{className:"card-body"},(n=a.subtype,t.filter((function(e){return e.subtype===n}))).map((function(a){return r.a.createElement(j,{key:a._id,item:a,action:e.action,button:e.button})})))));var n}))))},k=function(e){var a=Object(n.useState)([]),t=Object(m.a)(a,2),c=t[0],l=t[1];Object(n.useEffect)((function(){w.getItemsBySystem("DnD").then((function(e){l(e.data)}))}),[]);var s=[],o=function(e){return c.filter((function(a){return a.type===e}))};return r.a.createElement("div",null,r.a.createElement(f.a,{className:"mt-5 px-5"},r.a.createElement(b.a,{className:"text-center"},r.a.createElement("button",{href:"",alt:"Back Home",className:"text-center mb-1 btn-small",onClick:function(){return e.setPageState("Home")}},"Back Home"))),(c.forEach((function(e){})),void(s=Array.from(new Set(c.map((function(e){return e.type})))))),r.a.createElement("div",{className:"accordion",id:"itemMenu"},s.map((function(a){return r.a.createElement(S,{key:a,type:a,items:o(a),expanded:"Consumable"===a?"collapse show":"collapse",action:e.purchase,button:"Purchase"})}))))},x=function(e){return r.a.createElement("div",null,r.a.createElement(f.a,{className:"mt-5 px-5"},r.a.createElement(b.a,{className:"text-center"},r.a.createElement("button",{href:"#Inventory",alt:"Manage Inventory",className:"text-center",onClick:function(){return e.setPageState("Inventory")}},"Manage Inventory"))),r.a.createElement(f.a,{className:"my-5 px-5"},r.a.createElement(b.a,{className:"text-center"},r.a.createElement("button",{href:"#Store",alt:"Visit The Bazaar",className:"text-center",onClick:function(){return e.setPageState("Store")}},"Visit The Bazaar"))))};var C=function(e){var a=e.characterInfo;return Object(n.useEffect)((function(){}),[]),r.a.createElement(f.a,{className:"border p-1  mb-3 text-center sticky-top playerHeader"},r.a.createElement(b.a,{className:"border text-center p-0 mx-2 mh-75"},r.a.createElement(f.a,{className:"mx-0"},r.a.createElement(b.a,{sm:"8",md:{size:6,offset:3}},r.a.createElement("img",{src:a.characterImage,alt:"Character Portrait",className:"img-fluid mw-50"}))),a.characterName),r.a.createElement(b.a,{className:"border text-center p-0 mx-2"},r.a.createElement(f.a,{className:"mx-0 mt-2"},r.a.createElement(b.a,{className:"justify-center mt-5"},a.wallet,r.a.createElement("img",{className:"img-fluid w-25 ml-1 mb-1",src:"./gold-coin-icon.png",alt:"gold coins"})))))},A=function(){var e=Object(n.useContext)(p).authenticationState,a=Object(n.useState)({}),t=Object(m.a)(a,2),c=t[0],l=t[1],o=Object(n.useState)("Home"),i=Object(m.a)(o,2),u=i[0],E=i[1],g=Object(d.f)(),v=Object(s.c)();function N(a){console.log(a._id,c);for(var t=e.user.items,n=e.user.wallet,r=0;r<e.user.items.length;r++)e.user.items[r]===a._id&&(t.splice(r,1),n+=a.value,r=e.user.items.length);console.log(t),w.userSale({items:t,wallet:n}).then((function(a){l({userName:a.data.userName,characterName:a.data.characterName,characterImage:a.data.characterImage,wallet:a.data.wallet,items:a.data.items,bazaars:a.data.bazaars}),e.userHasAuthenticated(!0,{userName:a.data.userName,characterName:a.data.characterName,characterImage:a.data.characterImage,wallet:a.data.wallet,items:a.data.items,bazaars:a.data.bazaars})}))}function y(a){a.value>c.wallet?v.show("Looks like that is a bit too expensive..."):w.userPurchase({wallet:c.wallet-a.value,items:[a._id]}).then((function(a){l({userName:a.data.userName,characterName:a.data.characterName,characterImage:a.data.characterImage,wallet:a.data.wallet,items:a.data.items,bazaars:a.data.bazaars}),e.userHasAuthenticated(!0,{userName:a.data.userName,characterName:a.data.characterName,characterImage:a.data.characterImage,wallet:a.data.wallet,items:a.data.items,bazaars:a.data.bazaars})})).catch((function(e){return console.log(e)}))}Object(n.useEffect)((function(){e.isAuthenticated||g.push("/login"),l(e.user)}),[e]);return r.a.createElement(h.a,null,r.a.createElement(C,{user:c}),"Home"===u?r.a.createElement(x,{setPageState:E}):"Inventory"===u?r.a.createElement(O,{setPageState:E,items:c.items,sell:N}):"Store"===u?r.a.createElement(k,{setPageState:E,purchase:y}):r.a.createElement(x,{setPageState:"Home"}),r.a.createElement(f.a,{className:"sticky-footer mt-3"},r.a.createElement(b.a,{className:"text-center"},r.a.createElement("button",{className:"text-center btn-small",onClick:function(){w.logoutUser().then((function(a){200===a.status?(e.userHasAuthenticated({isAuthenticated:!1,user:{}}),g.push("/")):v.show("Weird logout error happening...")}))}},"Logout"))))},z=t.p+"static/media/bazaar.1ca5f24b.jpg",I=function(){var e=Object(n.useContext)(p).authenticationState,a=Object(n.useState)({}),t=Object(m.a)(a,2),c=t[0],l=t[1],o=Object(n.useState)({}),i=Object(m.a)(o,2),u=i[0],f=i[1],b=Object(d.f)(),E=Object(s.c)();Object(n.useEffect)((function(){e.isAuthenticated&&"GM"!==!e.user.type?(E.show("Not currently logged in as a GM"),console.log(e),w.getBazaarId(e.user.bazaars[0]).then((function(e){console.log(e),f(e.data)})).catch((function(e){console.log(e)})),l(e.user)):b.push("/login")}),[]);return r.a.createElement("div",null,r.a.createElement(h.a,{fluid:!0},r.a.createElement("img",{className:"img-fluid",src:z,alt:"Bazaaz"}),c.userName,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{className:"text-center"},"Player Join Code: ",u.joinCode),r.a.createElement("ul",null,r.a.createElement("p",null,"Players:"),console.log(u),u.players?u.players.map((function(e){return r.a.createElement("li",null,"(player)")})):"No Players")),r.a.createElement("button",{onClick:function(){w.logoutUser().then((function(a){200===a.status?(e.userHasAuthenticated({isAuthenticated:!1,user:{}}),b.push("/")):E.show("Weird logout error happening...")}))}},"Logout"))},P=t(16),B=t(80),q=t(81),H=t(82);var W=function(){var e=Object(n.useContext)(p).authenticationState,a=Object(n.useState)({}),t=Object(m.a)(a,2),c=t[0],l=t[1],o=Object(n.useState)(!1),E=Object(m.a)(o,2),v=E[0],N=E[1],y=Object(d.f)(),j=Object(s.c)();return Object(n.useEffect)((function(){e.isAuthenticated&&y.push("/userhome")}),[e]),r.a.createElement(h.a,null,r.a.createElement(f.a,{className:"mt-5 px-5"},r.a.createElement(b.a,null,r.a.createElement(u.b,{to:"/newusercreds/gm",alt:"Create a new Bazaar",className:"text-center"},r.a.createElement(g.a,{className:"splashBtn"},"Create a new Bazaar")))),r.a.createElement(B.a,null,r.a.createElement(f.a,{className:"mt-5 px-5 text-center"},r.a.createElement(b.a,null,v?r.a.createElement(u.b,{to:"/newusercreds/player?bazaar="+c.bazaarCode,alt:"Join a bazaar",className:"text-center"},r.a.createElement(g.a,{size:"lg",active:!0},"Join a bazaar")):r.a.createElement(g.a,{size:"lg",disabled:!0},"Join a bazaar"),r.a.createElement(q.a,null,r.a.createElement(H.a,{name:"bazaarCode",id:"bazaarCode",placeholder:"Bazaar Join Code",onChange:function(e){var a=e.target,t=a.name,n=a.value;l(Object(i.a)(Object(i.a)({},c),{},Object(P.a)({},t,n))),8===n.length?w.getBazaar(n).then((function(e){e.data&&N(!0)})).catch((function(e){j.show("Bazaar not found")})):N(!1)}})))),r.a.createElement(f.a,{className:"text-center"},r.a.createElement(b.a,null,r.a.createElement(u.b,{to:"/",alt:"Home",className:"text-center"},r.a.createElement(g.a,{className:"splashBtn"},"Home"))))))},M=t(83),U=t(84);var D=function(e){var a=Object(n.useContext)(p).authenticationState,t=Object(n.useState)({email:"",password:""}),c=Object(m.a)(t,2),l=c[0],o=c[1],u=Object(n.useState)(!1),f=Object(m.a)(u,2),b=f[0],E=f[1],v=Object(d.f)(),N=(Object(s.c)(),e.type),y=new URLSearchParams(Object(d.g)().search);Object(n.useEffect)((function(){a.isAuthenticated&&v.push("/userhome")}),[]);var j=function(e){var a=e.target,t=a.name,n=a.value;"email"===t&&(n=n.trim()),o(Object(i.a)(Object(i.a)({},l),{},Object(P.a)({},t,n)))},O=function(e){w.saveUser(e).then((function(a){if(200===a.status){var t={email:a.data.email,bazaars:a.data.bazaars,characters:a.data.characters,id:a.data._id};S(e,t)}})).catch((function(e){console.log(e)}))},S=function(e,t){w.loginUser(e).then((function(e){if(200===e.status)if(a.userHasAuthenticated(!0,Object(i.a)({},t)),console.log("Login done"),"player"===N){var n=y.get("bazaar");v.push("/newCharacter?bazaar="+n)}else v.push("/newBazaar")})).catch((function(e){console.log(e)}))};function k(){l.email.length>2&&w.checkEmail({email:l.email}).then((function(e){null===e.data?(E(!0),console.log("no conflict")):(E(!1),console.log("email conflict"))})).catch((function(e){console.log(e)}))}return r.a.createElement(h.a,null,r.a.createElement(B.a,{onSubmit:function(e){e.preventDefault(),l.email&&l.password&&O(l)},className:"text-center"},b||0===l.email.length?r.a.createElement(q.a,{row:!0,className:"mt-4"},r.a.createElement(M.a,{className:"text-center",for:"email"},"Email Address"),r.a.createElement(H.a,{valid:!0,name:"email",id:"email",placeholder:"myemailaddress@interwebs.com",onChange:j,onBlur:k})):r.a.createElement(q.a,{row:!0,className:"mt-4"},r.a.createElement(M.a,{className:"text-center",for:"email"},"Email Address"),r.a.createElement(H.a,{invalid:!0,name:"email",id:"email",placeholder:"myemailaddress@interwebs.com",onChange:j,onBlur:k}),r.a.createElement(U.a,null,"Looks like that email address is already registered")),l.password.length>=7||0===l.password.length?r.a.createElement(q.a,{row:!0},r.a.createElement(M.a,{for:"password"},"Password"),r.a.createElement(H.a,{valid:!0,type:"password",name:"password",id:"password",placeholder:"Password",onChange:j})):r.a.createElement(q.a,{row:!0},r.a.createElement(M.a,{for:"password"},"Password"),r.a.createElement(H.a,{invalid:!0,type:"password",name:"password",id:"password",placeholder:"Password",onChange:j}),r.a.createElement(U.a,null,"Password needs to be 7 characters or longer")),b&&l.password.length>=7?r.a.createElement(g.a,{className:"btn-small ml-3"},"Submit"):r.a.createElement(g.a,{className:"btn-small ml-3",disabled:!0},"Submit"),r.a.createElement(g.a,{className:"btn-small ml-3",onClick:function(e){e.preventDefault(),v.push("/")}},"Back Home")))},L=[t.p+"static/media/female-assassin.96d317c4.png",t.p+"static/media/female-dress.e0e8ed0f.png",t.p+"static/media/male-archer.2633f01c.png",t.p+"static/media/male-elf-green.27dc8ec6.png",t.p+"static/media/male-fighter.ed9fe464.png",t.p+"static/media/male-rogue.a3a19d47.png",t.p+"static/media/orc-barbarian.5419d557.png",t.p+"static/media/female-blue.744d4833.png"],R=function(e){return r.a.createElement(q.a,{tag:"fieldset",onChange:e.handleInputChange},r.a.createElement("legend",null,"Select a character image"),r.a.createElement("div",{className:"row"},L.map((function(e){return r.a.createElement("div",{className:"col-sm-3 p-4",key:e},r.a.createElement(q.a,{check:!0},r.a.createElement(M.a,{check:!0},r.a.createElement(H.a,{type:"radio",name:"characterImage",value:e}),r.a.createElement("img",{src:e,className:"img-fluid",alt:e}))))}))))};var F=function(e){var a=Object(s.c)(),t=e.setPageState,c=e.handleInputChange,l=(e.bazaarName,e.characterObject),o=Object(n.useState)(!isNaN(l.wallet)),i=Object(m.a)(o,2),u=i[0],d=i[1],p=function(e){isNaN(e.target.value)?(console.log(e.target.value),d(!1)):(c(e),d(!0))};return r.a.createElement(B.a,{className:"text-center"},r.a.createElement(q.a,{row:!0,className:"mt-4"},r.a.createElement(M.a,{className:"text-center",for:"characterName"},"Character Name"),r.a.createElement(H.a,{name:"characterName",id:"characterName",placeholder:"Lester Ressoration",onChange:c})),r.a.createElement(R,{handleInputChange:c}),r.a.createElement(q.a,null,r.a.createElement(M.a,{for:"startingGold"},"Starting Gold"),u?r.a.createElement(q.a,null,r.a.createElement(H.a,{valid:!0,name:"wallet",id:"startingGold",onChange:p})):r.a.createElement(q.a,null,r.a.createElement(H.a,{invalid:!0,name:"wallet",id:"startingGold",placeholder:"Enter your starting gold",onChange:p}),r.a.createElement(U.a,null,"Oh noes! You need a number in here"))),r.a.createElement(g.a,{onClick:function(){l.characterName&&u&&l.characterImage?t("Equipment"):a.show("Please finish filling out the form")},className:"btn-small ml-3"},"Add Starting Equipment"))},G=t(42);var _=function(e){var a=e.items;return r.a.createElement("div",{className:"dropup"},r.a.createElement("button",{type:"button",className:"btn btn-secondary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},"Items"),r.a.createElement("ul",{className:"dropdown-menu dropdown-menu-dark"},a.map((function(e){return r.a.createElement("li",{className:"dropdown-item",key:e.id},e.name," - ",e.value)}))))};var J=function(e){e.setPageState;var a=e.bazaarObject,t=e.API,c=e.characterObject,l=e.authenticationState,s=Object(d.f)(),o=Object(n.useState)([]),i=Object(m.a)(o,2),u=i[0],p=i[1],h=Object(n.useState)([]),E=Object(m.a)(h,2),v=E[0],N=E[1],y=[];Object(n.useEffect)((function(){console.log(l),t.getItemsBySystem(a.system).then((function(e){p(e.data)}))}),[]);var w=function(e){return u.filter((function(a){return a.type===e}))},j=function(e){N([].concat(Object(G.a)(v),[{name:e.name,value:e.value,id:e._id}]))};return r.a.createElement("div",{className:"text-center"},r.a.createElement(C,{characterInfo:c}),void(y=Array.from(new Set(u.map((function(e){return e.type}))))),r.a.createElement("div",{className:"accordion",id:"itemMenu"},y.map((function(e){return r.a.createElement(S,{key:e,type:e,items:w(e),expanded:"collapse",action:j,button:"Add"})}))),r.a.createElement(_,{items:v,API:t}),r.a.createElement(f.a,{className:"sticky-footer mt-3"},r.a.createElement(b.a,{className:"text-center"},r.a.createElement(g.a,{className:"btn-small mr-3",onClick:function(){var e=v.map((function(e){return e.id}));console.log(a),t.saveCharacter({characterName:c.characterName,characterImage:c.image,wallet:c.wallet,items:e,bazaar:a.id,owner:l.user.id}).then((function(e){200===e.status&&s.push("/characterhome")})).catch((function(e){return console.log(e)}))}},"Save ",c.characterName))))};var T=function(e){var a=Object(n.useContext)(p).authenticationState,t=Object(n.useState)({wallet:0,characterName:""}),c=Object(m.a)(t,2),l=c[0],s=c[1],o=Object(n.useState)({}),u=Object(m.a)(o,2),f=u[0],b=u[1],E=(Object(d.f)(),Object(n.useState)("Main")),g=Object(m.a)(E,2),v=g[0],N=g[1],y=new URLSearchParams(Object(d.g)().search).get("bazaar");Object(n.useEffect)((function(){j()}),[]);var j=function(){w.getBazaar(y).then((function(e){console.log("bazaar response",e.data),b({name:e.data.name,system:e.data.system,id:e.data.id})})).catch((function(e){return console.log(e)}))},O=function(e){var a=e.target,t=a.name,n=a.value;s(Object(i.a)(Object(i.a)({},l),{},Object(P.a)({},t,n)))};return r.a.createElement(h.a,null,"Main"===v?r.a.createElement(F,{setPageState:N,handleInputChange:O,bazaarName:f.name,characterObject:l}):"Equipment"===v?r.a.createElement(J,{setPageState:N,bazaarObject:f,API:w,characterObject:l,authenticationState:a}):void 0)},V=function(e){var a=Object(n.useContext)(p).authenticationState,t=Object(d.f)();return r.a.createElement(h.a,null,r.a.createElement(f.a,null,"Bazaar Home"),r.a.createElement("button",{className:"text-center btn-small",onClick:function(){w.logoutUser().then((function(e){200===e.status?(a.userHasAuthenticated({isAuthenticated:!1,user:{}}),t.push("/")):alert.show("Weird logout error happening...")}))}},"Logout"))},X=function(){var e=Object(n.useContext)(p).authenticationState,a=Object(n.useState)({}),t=Object(m.a)(a,2),c=t[0],l=t[1],o=Object(d.f)(),E=Object(s.c)();function g(e){var a=e.target,t=a.name,n=a.value;l(Object(i.a)(Object(i.a)({},c),{},Object(P.a)({},t,n)))}return r.a.createElement(h.a,null,r.a.createElement(B.a,{onSubmit:function(a){if(a.preventDefault(),c.email&&c.password){var t={email:c.email.trim(),password:c.password};w.loginUser(t).then((function(a){200===a.status&&e.userHasAuthenticated(!0,{email:a.data.email,bazaars:a.data.bazaars,characters:a.data.characters})})).then(void o.push("/userhome")).catch((function(e){console.log(e),E.show("No user found with those credentials")}))}else E.show("Please enter a email and password")},className:"mt-5"},r.a.createElement(q.a,{row:!0,className:"mb-4"},r.a.createElement(H.a,{name:"email",id:"email",placeholder:"Email Address",onChange:g})),r.a.createElement(q.a,{row:!0,className:"mb-4"},r.a.createElement(H.a,{type:"password",name:"password",id:"password",placeholder:"Password",onChange:g})),r.a.createElement(f.a,null,r.a.createElement(b.a,{className:"text-center mt-3"},r.a.createElement("button",null,"Submit")))),r.a.createElement(b.a,{className:"text-center mt-3"},r.a.createElement(u.b,{to:"/"},r.a.createElement("button",null,"Go Back"))))},Y=t(85),$=function(e){var a=e.formObject,t=e.setFormObject,n=e.setPageState;function c(e){var n=e.target,r=n.name,c=n.value;t(Object(i.a)(Object(i.a)({},a),{},Object(P.a)({},r,c)))}return r.a.createElement(f.a,{className:"my-1"},r.a.createElement(b.a,{className:"text-center",sm:"12",md:{size:6,offset:3},lg:{size:8,offset:2}},r.a.createElement(H.a,{name:"bazaarName",placeholder:"Bazaar Name",id:"bazaarName",onChange:c}),r.a.createElement(Y.a,{className:"my-2",vertical:!0},r.a.createElement(g.a,{className:"my-1",type:"radio",onClick:c,active:"DnD"===a.system,name:"system",value:"DnD"},"Dungeons and Dragons 5th Edition"),r.a.createElement(g.a,{type:"radio",onClick:c,active:"Pathfinder"===a.system,name:"system",value:"Pathfinder"},"Pathfinder 1st Edition")),r.a.createElement(f.a,{className:"sticky-footer mt-3"},r.a.createElement(b.a,{className:"text-center"},r.a.createElement("button",{className:"text-center btn-small",onClick:function(e){n("Settings")}},"Choose Bazaar Settings")))))},K=function(e){var a=e.formObject,t=e.setFormObject,n=(e.setPageState,e.saveNewBazaar);function c(e){var n=Object.fromEntries(Object.entries(a).map((function(a){var t=Object(m.a)(a,2),n=t[0],r=t[1];return n==="".concat(e.target.name)?[n,!r]:[n,r]})));t(Object(i.a)({},n))}return r.a.createElement(f.a,{className:"my-1"},r.a.createElement(b.a,{className:"text-center",sm:"12",md:{size:6,offset:3},lg:{size:8,offset:2}},"Require Approval For:",r.a.createElement("div",{className:"form-check form-switch"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"requireCustomItemApproval",name:"requireCustomItemApproval",checked:a.requireCustomItemApproval,onChange:c}),r.a.createElement("label",{className:"form-check-label",htmlFor:"requireCustomItemApproval"},"Custom Item Addition")),r.a.createElement("div",{className:"form-check form-switch"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"requireWalletAdditionApproval",name:"requireWalletAdditionApproval",checked:a.requireWalletAdditionApproval,onChange:c}),r.a.createElement("label",{className:"form-check-label",htmlFor:"requireWalletAdditionApproval"},"Wallet Additions")),r.a.createElement("div",{className:"form-check form-switch"},r.a.createElement("input",{className:"form-check-input form-control",type:"checkbox",id:"requireWalletChangeApproval",name:"requireWalletChangeApproval",checked:a.requireWalletChangeApproval,onChange:c}),r.a.createElement("label",{className:"form-check-label",htmlFor:"requireWalletChangeApproval"},"All Wallet Changes")),r.a.createElement("div",{className:"form-check form-switch"},r.a.createElement("input",{className:"form-check-input form-control",type:"checkbox",id:"requireSaleApproval",name:"requireSaleApproval",checked:a.requireSaleApproval,onChange:c}),r.a.createElement("label",{className:"form-check-label",htmlFor:"requireSaleApproval"},"Item Sales")),r.a.createElement("div",{className:"form-check form-switch"},r.a.createElement("input",{className:"form-check-input form-control",type:"checkbox",id:"requirePurchaseApproval",name:"requirePurchaseApproval",checked:a.requirePurchaseApproval,onChange:c}),r.a.createElement("label",{className:"form-check-label",htmlFor:"requirePurchaseApproval"},"Item Purchases")),"General Settings:",r.a.createElement("div",{className:"form-check form-switch"},r.a.createElement("input",{className:"form-check-input form-control",type:"checkbox",id:"limitedInventory",name:"limitedInventory",checked:a.limitedInventory,onChange:c}),r.a.createElement("label",{className:"form-check-label",htmlFor:"itemPurchases"},"Set Stock Limits")),r.a.createElement(f.a,{className:"sticky-footer mt-3"},r.a.createElement(b.a,{className:"text-center"},r.a.createElement("button",{type:"submit",className:"text-center btn-small",onClick:function(e){e.preventDefault(),n(a)}},"Finish!")))))},Q=function(e){var a=Object(n.useContext)(p).authenticationState,t=Object(n.useState)({requireCustomItemApproval:!1,requireWalletAdditionApproval:!1,requireWalletChangeApproval:!1,requireSaleApproval:!1,requirePurchaseApproval:!1,limitedInventory:!1}),c=Object(m.a)(t,2),l=c[0],s=c[1],o=Object(d.f)(),u=Object(n.useState)("Main"),E=Object(m.a)(u,2),g=E[0],v=E[1];function N(e){var t=Object(i.a)(Object(i.a)({},e),{},{creator:a.user.id});w.saveBazaar(t).then((function(e){console.log(e);e.data.joinCode;o.push("/bazaarhome")})).catch((function(e){console.log(e)}))}return r.a.createElement(h.a,null,r.a.createElement(f.a,{className:"my-2"},r.a.createElement(b.a,{className:"text-center"},"Make A New Bazaar!","Main"===g?r.a.createElement($,{setPageState:v,formObject:l,setFormObject:s}):"Settings"===g?r.a.createElement(K,{setPageState:v,formObject:l,setFormObject:s,saveNewBazaar:N}):void 0)))};var Z=function(){var e=Object(n.useState)({updates:0,isAuthenticated:!1,user:{},userHasAuthenticated:function(e,a){c(Object(i.a)(Object(i.a)({},t),{},{isAuthenticated:e,user:a,updates:t.updates++}))}}),a=Object(m.a)(e,2),t=a[0],c=a[1];return r.a.createElement(p.Provider,{value:{authenticationState:t}},r.a.createElement(u.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement(E,null)}}),r.a.createElement(d.a,{exact:!0,path:"/characterhome",render:function(){return r.a.createElement(A,null)}}),r.a.createElement(d.a,{exact:!0,path:"/gmhome"},r.a.createElement(I,null)),r.a.createElement(d.a,{exact:!0,path:"/newusertype",render:function(){return r.a.createElement(W,null)}}),r.a.createElement(d.a,{exact:!0,path:"/newusercreds/player",render:function(){return r.a.createElement(D,{type:"player"})}}),r.a.createElement(d.a,{exact:!0,path:"/newusercreds/gm",render:function(){return r.a.createElement(D,null)}}),r.a.createElement(d.a,{exact:!0,path:"/newCharacter",render:function(){return r.a.createElement(T,null)}}),r.a.createElement(d.a,{exact:!0,path:"/newbazaar",render:function(){return r.a.createElement(Q,null)}}),r.a.createElement(d.a,{exact:!0,path:"/bazaarhome",render:function(){return r.a.createElement(V,null)}}),r.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(X,null)}}),r.a.createElement(d.a,{path:"*"},r.a.createElement(v,null))))))},ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var te={position:s.b.BOTTOM_CENTER,timeout:4e3,offset:"5px",transition:"fade"};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,Object.assign({template:o.a},te),r.a.createElement(Z,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");ee?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ae(a,e)}))}}()}},[[73,1,2]]]);
//# sourceMappingURL=main.4642c9ca.chunk.js.map